<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Global Crypto Wallet</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --wallet-bg: #181c24;
      --wallet-card: #212735;
      --accent: #ffd700;
      --primary: #1c7bfc;
      --success: #01bc54;
      --danger: #d32f2f;
      --coin-bnb: #f3ba2f;
      --coin-usdt: #26a17b;
      --coin-trx: #ec0928;
      --coin-usdc: #2775ca;
      --coin-eth: #627eea;
      --coin-btc: #f7931a;
      --text-main: #f4f4f4;
      --text-muted: #a0aec0;
    }
    * { box-sizing: border-box; }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--wallet-bg);
      color: var(--text-main);
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    .wallet-container {
      max-width: 470px;
      margin: 36px auto 0 auto;
      background: var(--wallet-card);
      border-radius: 18px;
      box-shadow: 0 12px 36px rgba(0,0,0,0.19);
      padding: 30px 22px 18px 22px;
      position: relative;
    }
    .wallet-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    .wallet-header h2 {
      font-size: 1.8em;
      font-weight: 700;
      margin: 0;
      letter-spacing: 1.2px;
      color: var(--accent);
    }
    .wallet-balance {
      font-size: 2.6em;
      font-weight: 700;
      color: var(--success);
      margin: 8px 0 2px 0;
      display: flex;
      align-items: baseline;
      gap: 10px;
    }
    .wallet-balance span {
      font-size: 0.5em;
      font-weight: 500;
      color: var(--text-muted);
    }
    .wallet-addr {
      font-family: monospace;
      font-size: 1em;
      background: #22272f;
      color: #fff;
      border-radius: 8px;
      padding: 7px 12px;
      margin-bottom: 14px;
      display: flex;
      align-items: center;
      gap: 10px;
      user-select: all;
    }
    .copy-btn {
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 5px;
      padding: 3px 10px;
      cursor: pointer;
      font-size: 0.95em;
      margin-left: 6px;
    }
    .wallet-actions {
      display: flex;
      gap: 12px;
      margin-bottom: 18px;
    }
    .wallet-actions button {
      flex: 1;
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 13px 0;
      font-size: 1.13em;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 3px 12px rgba(21,34,56,0.10);
      transition: background 0.12s;
    }
    .wallet-actions button.receive {
      background: var(--success);
    }
    .wallet-actions button.send {
      background: var(--danger);
    }
    .wallet-actions button:hover {
      opacity: .94;
    }
    .coin-list {
      margin-bottom: 26px;
    }
    .coin-card {
      display: flex;
      align-items: center;
      gap: 14px;
      background: #242c3a;
      border-radius: 10px;
      padding: 12px 14px 12px 10px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: background 0.13s;
      border: 2px solid transparent;
      position: relative;
    }
    .coin-card.selected {
      border: 2px solid var(--accent);
      background: #26313f;
    }
    .coin-card .coin-logo {
      width: 38px;
      height: 38px;
      background: node;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    .coin-card .coin-symbol {
      font-weight: 700;
      font-size: 1.1em;
    }
    .coin-card .coin-balance {
      margin-left: auto;
      font-size: 1.1em;
      font-weight: 600;
      color: var(--success);
    }
    .coin-card .coin-rate {
      margin-left: 10px;
      font-size: 0.95em;
      color: var(--text-muted);
      font-weight: 500;
    }
    .coin-card .trend {
      margin-left: 8px;
      font-size: 1.33em;
      vertical-align: middle;
    }
    .divider {
      margin: 25px 0 18px 0;
      border-top: 1.5px solid #262d3b;
    }
    .transfer-form {
      background: #232d3a;
      border-radius: 10px;
      padding: 18px 14px 12px 14px;
      margin-bottom: 20px;
      display: none;
      flex-direction: column;
      gap: 13px;
      animation: fadeIn .45s;
    }
    .transfer-form label {
      margin-bottom: 4px;
      font-weight: 600;
    }
    .transfer-form input,
    .transfer-form select {
      width: 100%;
      padding: 9px 12px;
      border-radius: 7px;
      border: 1.5px solid #28304a;
      background: #161c23;
      color: #fff;
      font-size: 1.07em;
      margin-bottom: 7px;
      outline: none;
    }
    .transfer-form button {
      margin-top: 11px;
      width: 100%;
      padding: 11px;
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: 7px;
      font-weight: bold;
      font-size: 1.13em;
      cursor: pointer;
    }
    .transfer-form .cancel-btn {
      background: #2d333f;
      color: #fff;
      margin-top: 4px;
    }
    .tx-list {
      margin-bottom: 10px;
    }
    .tx-card {
      background: #212735;
      border-radius: 8px;
      padding: 13px 13px 10px 13px;
      margin-bottom: 9px;
      display: flex;
      align-items: center;
      gap: 13px;
      box-shadow: 0 2px 10px rgba(20,20,25,0.07);
      font-size: 0.97em;
      position: relative;
    }
    .tx-card .tx-coin-logo {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .tx-card .tx-main {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 3px;
    }
    .tx-card .tx-type {
      font-weight: 700;
      font-size: 1.09em;
    }
    .tx-card .tx-amount {
      font-size: 1.13em;
      font-weight: 700;
    }
    .tx-card .tx-address {
      color: #a0aec0;
      font-size: 0.93em;
      font-family: monospace;
      word-break: break-all;
    }
    .tx-card .tx-time {
      font-size: 0.91em;
      color: #b7c1d1;
      font-weight: 500;
    }
    .tx-card .tx-id {
      font-size: 0.92em;
      color: #ffd700;
      font-family: monospace;
      font-weight: 500;
      margin-top: 2px;
    }
    .tx-card .tx-status {
      position: absolute;
      right: 12px;
      top: 14px;
      font-size: 0.82em;
      padding: 1.5px 7px;
      border-radius: 7px;
      font-weight: bold;
      background: var(--success);
      color: #fff;
      box-shadow: 0 1px 4px rgba(18,28,44,0.09);
    }
    .tx-card.sent .tx-status {
      background: var(--danger);
    }
    .add-funds-btn {
      display: inline-block;
      background: var(--primary);
      color: #fff;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      padding: 7px 16px;
      margin-bottom: 12px;
      margin-top: 2px;
      font-size: 1.07em;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(21,34,56,0.09);
      transition: background 0.13s;
    }
    .add-funds-btn:hover {
      background: #195ab3;
    }
    .mini-alert {
      background: #191d24;
      color: var(--success);
      padding: 7px 19px;
      border-radius: 7px;
      text-align: center;
      margin-bottom: 12px;
      font-size: 1.07em;
      display: none;
    }
    @media (max-width: 540px) {
      .wallet-container { padding: 10px 3vw 10px 3vw; }
      .wallet-header h2 { font-size: 1.2em; }
      .wallet-balance { font-size: 1.6em; }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px);}
      to { opacity: 1; transform: translateY(0);}
    }
    /* ---------- FULLSCREEN SUCCESS PUSH ---------- */
    .push-success-container {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      width: 100vw; height: 100vh;
      background: rgba(30,40,50,0.96);
      z-index: 99999;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 0.2s;
      animation: fadeIn .5s;
    }
    .push-success-content {
      background: #fff;
      color: #212735;
      border-radius: 22px;
      padding: 44px 30px 32px 30px;
      box-shadow: 0 8px 60px 6px rgba(21,34,70,0.16);
      max-width: 350px;
      width: 100%;
      text-align: center;
      position: relative;
      animation: fadeIn .7s;
    }
    .push-success-content .close-push {
      position: absolute;
      top: 18px;
      right: 18px;
      font-size: 2.1em;
      background: none;
      border: none;
      color: #c62828;
      cursor: pointer;
      z-index: 2;
      line-height: 1;
      font-weight: bold;
      transition: color .12s;
    }
    .push-success-content .close-push:hover {
      color: #b71c1c;
    }
    .push-success-content .big-success {
      font-size: 3.8em;
      margin-bottom: 18px;
      color: var(--success);
      font-weight: bold;
    }
    .push-success-content .success-title {
      font-size: 1.46em;
      font-weight: bold;
      color: #212735;
      margin-bottom: 10px;
      letter-spacing: .5px;
    }
    .push-success-content .success-desc {
      color: #344262;
      font-size: 1.09em;
      margin-bottom: 18px;
    }
    .push-success-content .success-details {
      text-align: left;
      background: #f4f7fe;
      border-radius: 13px;
      padding: 12px 15px 8px 15px;
      margin-top: 12px;
      font-size: 0.97em;
      word-break: break-all;
      color: #222a3c;
    }
  </style>
</head>
<body>
  <div class="wallet-container" id="walletApp">
    <div class="wallet-header">
      <h2>Vestinoo Global Crypto Wallet</h2>
      <span style="font-size:1.3em; color:var(--primary)">üåê</span>
    </div>
    <div class="wallet-balance" id="mainBalance"></div>
    <div class="wallet-addr" id="mainWalletAddr">
      <span id="mainWalletAddrText"></span>
      <button class="copy-btn" onclick="copyToClipboard(mainWalletAddrText.innerText)">Copy</button>
    </div>
    <button class="add-funds-btn" id="addFundsBtn">+</button>

    <div class="divider"></div>

    <div class="coin-list" id="coinList"></div>

    <div class="wallet-actions">
      <button class="receive" id="receiveBtn">‚ûï Receive</button>
      <button class="send" id="sendBtn">‚ûñ Send</button>
    </div>

    <div class="mini-alert" id="miniAlert"></div>

    <form class="transfer-form" id="transferForm">
      <label for="coinSelect">Coin</label>
      <select id="coinSelect"></select>
      <label for="toAddr">Wallet Address</label>
      <input type="text" id="toAddr" placeholder="Enter recipient address" autocomplete="off" />
      <label for="amount">Amount</label>
      <input type="number" id="amount" placeholder="Enter amount" min="1" step="1" />
      <button type="submit" id="transferSubmitBtn"></button>
      <button type="button" class="cancel-btn" id="transferCancelBtn">Cancel</button>
    </form>

    <div class="divider"></div>
    <div>
      <div style="font-weight: 600; font-size: 1.18em; margin-bottom: 8px; color:var(--primary)">Recent Activity</div>
      <div class="tx-list" id="txList"></div>
    </div>
  </div>
  <div id="pushSuccessContainer" class="push-success-container" style="display:none;">
    <div class="push-success-content" id="pushSuccessContent">
      <button class="close-push" id="closePushBtn" title="Close">&times;</button>
      <div class="big-success">‚úîÔ∏è</div>
      <div class="success-title" id="pushSuccessTitle"></div>
      <div class="success-desc" id="pushSuccessDesc"></div>
      <div class="success-details" id="pushSuccessDetails"></div>
    </div>
  </div>
  <script>
    // ------------------ CONFIG -------------------
    const COINS = [
      {
        id: "bnb",
        symbol: "BNB",
        name: "BNB (BEP20)",
        color: "var(--coin-bnb)",
        logo: "BnB.png",
        rate: 585.09,
        fluct: true
      },
      {
        id: "usdt",
        symbol: "USDT",
        name: "Tether USDT (BEP20)",
        color: "var(--coin-usdt)",
        logo: "usdt.png",
        rate: 1.0,
        fluct: true
      },
      {
        id: "trx",
        symbol: "TRX",
        name: "TRON TRX (BEP20)",
        color: "var(--coin-trx)",
        logo: "trx1.png",
        rate: 0.121,
        fluct: true 
      },
      {
        id: "usdc",
        symbol: "USDC",
        name: "USD Coin USDC (BEP20)",
        color: "var(--coin-usdc)",
        logo: "usdc.png",
        rate: 1.0,
        fluct: false
      },
      {
        id: "btc",
        symbol: "BTC",
        name: "Bitcoin",
        color: "var(--coin-btc)",
        logo: "https://cdn.jsdelivr.net/gh/AgroFruit24/fake-crypto-icons@main/btc.svg",
        rate: 64600,
        fluct: false
      },
      {
        id: "eth",
        symbol: "ETH",
        name: "Ethereum",
        color: "var(--coin-eth)",
        logo: "https://cdn.jsdelivr.net/gh/AgroFruit24/fake-crypto-icons@main/eth.svg",
        rate: 3400,
        fluct: false
      }
    ];
    const MAIN_COINS = ["bnb", "usdt", "trx", "usdc"];

    // ------------------ STORAGE -------------------
    const STORAGE_KEY = "fake_wallet_data_competition";
    function saveData(data) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }
    function loadData() {
      try {
        return JSON.parse(localStorage.getItem(STORAGE_KEY)) || null;
      } catch {
        return null;
      }
    }
    function randomWalletAddress(coin) {
      if (coin === "bnb" || coin === "usdt" || coin === "usdc") {
        return "0x" + Array.from({length:40},()=>Math.floor(Math.random()*16).toString(16)).join('');
      }
      if (coin === "trx") {
        const chars = "1234567ABCDHJKRSTUVWXYZabcfghijkmpqrstuvwx";
        let addr = "T";
        for (let i = 0; i < 33; ++i) addr += chars[Math.floor(Math.random()*chars.length)];
        return addr;
      }
      if (coin === "btc") {
        const chars = "1234589ABFGHJKLMlSTUVWXYZabcdefghijkmnopqrvwxyz";
        let addr = "1";
        for (let i = 0; i < 33; ++i) addr += chars[Math.floor(Math.random()*chars.length)];
        return addr;
      }
      if (coin === "eth") {
        return "0x" + Array.from({length:40},()=>Math.floor(Math.random()*16).toString(16)).join('');
      }
      return "0x" + Array.from({length:40},()=>Math.floor(Math.random()*16).toString(16)).join('');
    }
    function randomTxId() {
      return "0x" + Array.from({length:64},()=>Math.floor(Math.random()*16).toString(16)).join('');
    }
    function fakeTimeAgo(offset = 0) {
      const now = Date.now();
      const date = new Date(now - offset);
      return date.toLocaleString(undefined, { dateStyle: 'medium', timeStyle: 'short' });
    }
    function getCoinById(id) {
      return COINS.find(c=>c.id===id);
    }
    // ------------------ STATE -------------------
    let wallet = null;
    function initialWallet() {
      const w = {
        masterAddress: randomWalletAddress("bnb"),
        coins: {},
        txs: [],
        rates: COINS.reduce((acc,c)=>{acc[c.id]=c.rate;return acc;},{}),
      };
      // All coins start with $97 worth (main coins), others 0
      COINS.forEach(c=>{
        w.coins[c.id] = {
          address: randomWalletAddress(c.id),
          balance: MAIN_COINS.includes(c.id) ? 97 / c.rate : 0,
        };
      });
      return w;
    }
    function updateRates() {
      COINS.forEach(coin => {
        let r = wallet.rates[coin.id];
        if (coin.fluct) {
          if (coin.id === "bnb") {
            let direction = Math.random() > 0.5 ? 1 : -1;
            let change = Math.random() * 2;
            r += direction * change;
            if (r < 500) r = 500 + Math.random() * 30;
            if (r > 650) r = 650 - Math.random() * 30;
          }
          if (coin.id === "trx") {
            let direction = Math.random() > 0.5 ? 1 : -1;
            let change = Math.random() * 0.01;
            r += direction * change;
            if (r < 0.10) r = 0.10 + Math.random() * 0.01;
            if (r > 0.16) r = 0.16 - Math.random() * 0.01;
          }
        }
        if (coin.id === "usdt" || coin.id === "usdc") {
          r = 1.0 + (Math.random() - 0.5) * 0.0005;
        }
        wallet.rates[coin.id] = parseFloat(r.toFixed(5));
      });
      saveData(wallet);
    }
    // ------------------ UI FUNCTIONS -------------------
    function render() {
      updateRates();
      let totalUsd = 0;
      for (const cid in wallet.coins) {
        const {balance} = wallet.coins[cid];
        const rate = wallet.rates[cid];
        totalUsd += balance * rate;
      }
      document.getElementById("mainBalance").innerHTML =
        "$" + totalUsd.toLocaleString(undefined, {maximumFractionDigits:2}) +
        `<span>USD Total</span>`;
      document.getElementById("mainWalletAddrText").innerText = wallet.masterAddress;
      const coinList = document.getElementById("coinList");
      coinList.innerHTML = "";
      COINS.forEach((c,idx)=>{
        const b = wallet.coins[c.id]?.balance || 0;
        const usd = b * wallet.rates[c.id];
        const trend = wallet.rates[c.id] > c.rate ? 
            `<span class="trend" style="color:var(--success)">‚ñ≤</span>` :
            wallet.rates[c.id] < c.rate ?
            `<span class="trend" style="color:var(--danger)">‚ñº</span>` : 
            `<span class="trend" style="color:gold">‚óè</span>`;
        const card = document.createElement('div');
        card.className = 'coin-card' + (c.id===selectedCoinId?' selected':'');
        card.style.borderLeft = `7px solid ${c.color}`;
        card.innerHTML = `
          <span class="coin-logo" style="background:${c.color}">
            <img src="${c.logo}" width="28" height="28" alt="${c.symbol}"/>
          </span>
          <span class="coin-symbol">${c.symbol}</span>
          <span class="coin-rate">@ $${wallet.rates[c.id].toLocaleString()}</span>
          <span class="coin-balance">${b.toLocaleString(undefined,{maximumFractionDigits:8})}</span>
          ${trend}
        `;
        card.onclick = function(e){
          selectedCoinId = c.id;
          render();
        };
        coinList.appendChild(card);
      });
      // Coin selector
      const coinSelect = document.getElementById("coinSelect");
      coinSelect.innerHTML = "";
      COINS.forEach(c=>{
        coinSelect.innerHTML += `<option value="${c.id}" ${c.id===selectedCoinId?"selected":""}>${c.name} (${c.symbol})</option>`;
      });
      // TX List
      const txList = document.getElementById("txList");
      txList.innerHTML = "";
      wallet.txs.slice().reverse().forEach(tx=>{
        const coin = getCoinById(tx.coin);
        const txCard = document.createElement('div');
        txCard.className = 'tx-card'+(tx.type==='sent'?' sent':'');
        txCard.innerHTML = `
          <span class="tx-coin-logo" style="background:${coin.color}">
            <img src="${coin.logo}" width="22" height="22" alt=""/>
          </span>
          <div class="tx-main">
            <span class="tx-type">${tx.type==='sent'?'Sent':'Received'} ${coin.symbol}</span>
            <span class="tx-address">${tx.type==='sent'?'To':'From'}: ${tx.address}</span>
            <span class="tx-amount">${tx.type==='sent'?'-':''}${
              parseFloat(tx.amount).toLocaleString(undefined,{maximumFractionDigits:8})
            } ${coin.symbol} ($${(tx.amount*wallet.rates[coin.id]).toLocaleString(undefined,{maximumFractionDigits:2})})</span>
            <span class="tx-time">${tx.time}</span>
            <span class="tx-id">Txn ID: ${tx.id}</span>
          </div>
          <span class="tx-status">${tx.type==='sent'?'Sent':'Received'}</span>
        `;
        txList.appendChild(txCard);
      });
    }
    let selectedCoinId = "bnb";
    // ----------------- FORM LOGIC ------------------
    function showMiniAlert(msg) {
      const el = document.getElementById("miniAlert");
      el.innerText = msg;
      el.style.display = "block";
      setTimeout(()=>el.style.display="none", 2600);
    }
    window.copyToClipboard = function(text) {
      navigator.clipboard.writeText(text);
      showMiniAlert("Wallet address copied!");
    }
    // Add Funds: Each click gives $97 to the FOUR main coins only
    document.getElementById("addFundsBtn").onclick = function() {
      MAIN_COINS.forEach(cid=>{
        wallet.coins[cid].balance += 97 / wallet.rates[cid];
      });
      saveData(wallet);
      render();
      showMiniAlert("Added $97 to all main coins!");
    }
    // Success PUSH Modal
    function showPushSuccess({title,desc,details}) {
      document.getElementById("pushSuccessTitle").innerText = title||"Payment Successful!";
      document.getElementById("pushSuccessDesc").innerText = desc||"Your payment has been processed and is now complete.";
      document.getElementById("pushSuccessDetails").innerHTML = details||"";
      document.getElementById("pushSuccessContainer").style.display = "flex";
      document.body.style.overflow = "hidden";
    }
    document.getElementById("closePushBtn").onclick = function() {
      document.getElementById("pushSuccessContainer").style.display = "none";
      document.body.style.overflow = "";
    };
    // Send/Receive logic
    const transferForm = document.getElementById("transferForm");
    let transferType = "send";
    document.getElementById("sendBtn").onclick = ()=>{
      transferType = "send";
      showTransferForm();
    };
    document.getElementById("receiveBtn").onclick = ()=>{
      transferType = "receive";
      showTransferForm();
    };
    function showTransferForm() {
      transferForm.style.display = "flex";
      document.getElementById("coinSelect").value = selectedCoinId;
      document.getElementById("toAddr").placeholder =
        transferType === "send" ? "Enter recipient address" : "Enter sender address";
      document.getElementById("amount").placeholder =
        transferType === "send" ? "Enter amount to send ($1 minimum)" : "Amount to receive ($1 minimum)";
      document.getElementById("transferSubmitBtn").innerText =
        transferType === "send" ? "Send Coin" : "Simulate Receive";
      document.getElementById("toAddr").value = "";
      document.getElementById("amount").value = "";
      document.getElementById("toAddr").focus();
    }
    document.getElementById("transferCancelBtn").onclick = ()=>{
      transferForm.style.display = "none";
    }
    transferForm.onsubmit = function(e) {
      e.preventDefault();
      const coinId = document.getElementById("coinSelect").value;
      const addr = document.getElementById("toAddr").value.trim();
      const amount = parseFloat(document.getElementById("amount").value);
      const rate = wallet.rates[coinId];
      if (!addr || isNaN(amount) || amount < 1) {
        showMiniAlert("Please enter valid address and at least $1 amount.");
        return;
      }
      const coin = getCoinById(coinId);
      const coinAmount = amount / rate;
      if (transferType==="send") {
        if (wallet.coins[coinId].balance < coinAmount) {
          showMiniAlert("Insufficient balance!");
          return;
        }
        wallet.coins[coinId].balance -= coinAmount;
        const txn = {
          type: "sent",
          coin: coinId,
          address: addr,
          amount: coinAmount,
          id: randomTxId(),
          time: fakeTimeAgo(0)
        };
        wallet.txs.push(txn);
        saveData(wallet);
        render();
        // Show push container
        showPushSuccess({
          title: "Payment Successful!",
          desc: `Your payment of <b>${parseFloat(coinAmount).toLocaleString(undefined,{maximumFractionDigits:8})} ${coin.symbol}</b> ($${amount}) has been sent successfully.`,
          details: `
            <b>Transaction Details</b><br>
            <b>Status:</b> <span style="color:var(--success);font-weight:600">Confirmed</span><br>
            <b>To:</b> <span style="color:#1c7bfc">${addr}</span><br>
            <b>Coin:</b> <span style="color:${coin.color}">${coin.symbol}</span><br>
            <b>Amount:</b> ${parseFloat(coinAmount).toLocaleString(undefined,{maximumFractionDigits:8})} ${coin.symbol} ($${amount})<br>
            <b>Txn ID:</b> <span style="word-break:break-all">${txn.id}</span><br>
            <b>Time:</b> ${txn.time}
          `
        });
      } else {
        wallet.coins[coinId].balance += coinAmount;
        const txn = {
          type: "recv",
          coin: coinId,
          address: addr,
          amount: coinAmount,
          id: randomTxId(),
          time: fakeTimeAgo(0)
        };
        wallet.txs.push(txn);
        saveData(wallet);
        render();
        showPushSuccess({
          title: "Payment Received!",
          desc: `You have received <b>${parseFloat(coinAmount).toLocaleString(undefined,{maximumFractionDigits:8})} ${coin.symbol}</b> ($${amount}) successfully.`,
          details: `
            <b>Transaction Details</b><br>
            <b>Status:</b> <span style="color:var(--success);font-weight:600">Received</span><br>
            <b>From:</b> <span style="color:#1c7bfc">${addr}</span><br>
            <b>Coin:</b> <span style="color:${coin.color}">${coin.symbol}</span><br>
            <b>Amount:</b> ${parseFloat(coinAmount).toLocaleString(undefined,{maximumFractionDigits:8})} ${coin.symbol} ($${amount})<br>
            <b>Txn ID:</b> <span style="word-break:break-all">${txn.id}</span><br>
            <b>Time:</b> ${txn.time}
          `
        });
      }
      transferForm.style.display = "none";
    };
    document.getElementById("coinSelect").onchange = function(e){
      selectedCoinId = e.target.value;
      render();
    };
    // ------------------ INIT -------------------
    function init() {
      wallet = loadData();
      if (!wallet) {
        wallet = initialWallet();
        saveData(wallet);
      }
      render();
    }
    init();
  </script>
</body>
</html>
